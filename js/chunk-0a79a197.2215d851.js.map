{"version":3,"sources":["webpack:///./src/service/awards.js","webpack:///./src/views/Rank/Vote.vue?f013","webpack:///./src/components/misc/bind_wx_mp.vue","webpack:///./src/service/profile.js","webpack:///src/components/misc/bind_wx_mp.vue","webpack:///./src/components/misc/bind_wx_mp.vue?d694","webpack:///./src/components/misc/bind_wx_mp.vue?4f0d","webpack:///./src/views/Rank/Vote.vue","webpack:///./src/service/vote.js","webpack:///./src/components/vote_item_v1.vue","webpack:///src/components/vote_item_v1.vue","webpack:///./src/components/vote_item_v1.vue?f3d2","webpack:///./src/components/vote_item_v1.vue?4b42","webpack:///./src/components/vote_item_v2.vue","webpack:///src/components/vote_item_v2.vue","webpack:///./src/components/vote_item_v2.vue?75d1","webpack:///./src/components/vote_item_v2.vue?674f","webpack:///src/views/Rank/Vote.vue","webpack:///./src/views/Rank/Vote.vue?81d0","webpack:///./src/views/Rank/Vote.vue?defb","webpack:///./src/components/misc/bind_wx_mp.vue?6b64"],"names":["getGifts","params","$team","get","getUserInfo","$cms","__no_cache","render","_vm","this","_c","_self","attrs","visible","handleClose","directives","name","rawName","value","loading","expression","staticClass","ticket","qrcodeValue","slot","_e","_v","on","confirm","staticRenderFns","getWechatQrcode","base","data","props","type","Boolean","default","model","prop","event","computed","concat","encodeURIComponent","watch","val","loadQrcode","methods","_this","then","res","_res$data$data","finally","$emit","component","vote_note","domProps","_s","team_name","callback","$$v","server","key","_l","servers","item","id","voteTeam","getAllJoinedTeams","return_all","list","status","doVote","event_id","team_id","post","popType","getVoteStatus","mute","length","i","hasCondition","isMatched","teamLink","teamLogo","logo","guess","class","disabled","clicked","event_status","hasVoted","canVote","$event","vote","isLogin","User","$store","state","race","search_team","search_server","vote_end","moment","isBefore","includes","matchName","matchServer","$message","message","duration","$forceUpdate","toLogin","String","getThumbnail","default_avatar","getLink","mounted","components","authorLink","uid","leader","slogan","count","voteLimit","onBindWxMpUpdate","showBindWxMp","BindWxMp","profile","isWechatVerified","_this$profile","wechat_mp_openid","getVoteLimit","loadUser","$alert","confirmButtonText","action","_this2","_this3","getConfig","vote_title_img","__imgPath","loadData","getStatus","Object","keys","catch","err","console","log","init","immediate","handler","vote_item_v1","vote_item_v2"],"mappings":"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","file":"js/chunk-0a79a197.2215d851.js","sourcesContent":["import { $team, $cms } from \"@jx3box/jx3box-common/js/https.js\";\n\nexport function getDesc(event_id) {\n    return $team().get(`/api/team/team-gift/event/${event_id}`);\n}\nexport function getGifts(params) {\n    return $team().get(`/api/team/team-gift-record/list/public`, { params });\n}\nexport function createGift(payload) {\n    return $team().post(`/api/team/team-gift-record`, payload);\n}\nexport function getUserInfo() {\n    return $cms().get(\"/api/cms/user/my/info\", {\n        params: {\n            __no_cache: 1,\n        },\n    });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Vote.vue?vue&type=style&index=0&id=dea1b7a8&prod&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":\"绑定微信公众号\",\"visible\":_vm.visible,\"width\":\"30%\",\"custom-class\":\"m-notice-wechat__dialog\",\"before-close\":_vm.handleClose,\"append-to-body\":\"\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-wechat-content\"},[(_vm.ticket)?_c('el-image',{staticClass:\"u-qr\",attrs:{\"src\":_vm.qrcodeValue,\"lazy\":\"\"}},[_c('div',{staticClass:\"u-error\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"})])]):_vm._e(),_c('i',{staticClass:\"u-tip\"},[_vm._v(\"打开微信扫一扫，关注剑三魔盒公众号\")]),_c('el-button',{staticClass:\"u-btn\",attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":_vm.confirm}},[_vm._v(\"我已绑定\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { $cms } from \"@jx3box/jx3box-common/js/https\";\n\n\n// 获取微信二维码\nexport function getWechatQrcode() {\n    return $cms().get(`/api/cms/wechat/mp/bind`);\n}\n","<template>\n    <el-dialog\n        title=\"绑定微信公众号\"\n        :visible=\"visible\"\n        width=\"30%\"\n        custom-class=\"m-notice-wechat__dialog\"\n        :before-close=\"handleClose\"\n        append-to-body\n    >\n        <div class=\"m-wechat-content\" v-loading=\"loading\">\n            <el-image class=\"u-qr\" v-if=\"ticket\" :src=\"qrcodeValue\" lazy>\n                <div slot=\"error\" class=\"u-error\">\n                    <i class=\"el-icon-picture-outline\"></i>\n                </div>\n            </el-image>\n            <i class=\"u-tip\">打开微信扫一扫，关注剑三魔盒公众号</i>\n\n            <el-button class=\"u-btn\" type=\"success\" size=\"small\" @click=\"confirm\">我已绑定</el-button>\n        </div>\n    </el-dialog>\n</template>\n\n<script>\nimport { getWechatQrcode } from \"@/service/profile\";\nconst base = `https://mp.weixin.qq.com/cgi-bin/showqrcode`;\nexport default {\n    name: \"BindWxMp\",\n    data() {\n        return {\n            ticket: \"\",\n            loading: false,\n        };\n    },\n    props: {\n        visible: {\n            type: Boolean,\n            default: false,\n        },\n    },\n    model: {\n        prop: \"visible\",\n        event: \"update:visible\",\n    },\n    computed: {\n        qrcodeValue() {\n            return `${base}?ticket=${encodeURIComponent(this.ticket)}`;\n        },\n    },\n    watch: {\n        visible(val) {\n            if (val) {\n                this.loadQrcode();\n            }\n        },\n    },\n    methods: {\n        loadQrcode() {\n            this.loading = true;\n            getWechatQrcode()\n                .then((res) => {\n                    this.ticket = res.data.data?.ticket;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        handleClose() {\n            this.$emit(\"update:visible\", false);\n        },\n        confirm() {\n            this.$emit(\"update\")\n            this.$emit(\"update:visible\", false);\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n.m-notice-wechat__dialog {\n    max-width: 500px;\n    .m-wechat-content {\n        .flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 10px;\n        .u-qr {\n            .flex;\n            align-items: center;\n            justify-content: center;\n            .size(180px);\n            .el-image__inner {\n                .full;\n            }\n        }\n        .u-error {\n            .fz(120px);\n        }\n    }\n\n    .u-btn {\n        .mt(10px);\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./bind_wx_mp.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./bind_wx_mp.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./bind_wx_mp.vue?vue&type=template&id=3ef32126\"\nimport script from \"./bind_wx_mp.vue?vue&type=script&lang=js\"\nexport * from \"./bind_wx_mp.vue?vue&type=script&lang=js\"\nimport style0 from \"./bind_wx_mp.vue?vue&type=style&index=0&id=3ef32126&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-rank-vote\",attrs:{\"element-loading-text\":\"加载中...\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.3)\"}},[(_vm.vote_note)?_c('div',{staticClass:\"m-rank-vote-header\",domProps:{\"innerHTML\":_vm._s(_vm.vote_note)}}):_vm._e(),_c('table',{staticClass:\"m-rank-vote-table\"},[_c('thead',[_c('tr',[_c('th',{attrs:{\"width\":\"120px\"}},[_vm._v(\"排名\")]),_c('th',{attrs:{\"width\":\"120px\"}}),_c('th',{attrs:{\"width\":\"120px\"}},[_vm._v(\" 团队 \"),_c('el-popover',{attrs:{\"placement\":\"top\",\"width\":\"220\",\"trigger\":\"click\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入团队名关键字\",\"clearable\":\"\"},model:{value:(_vm.team_name),callback:function ($$v) {_vm.team_name=$$v},expression:\"team_name\"}}),_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"text\"},slot:\"reference\"},[_c('i',{staticClass:\"el-icon-search u-search-team\"})])],1)],1),_c('th',[_c('el-select',{staticClass:\"u-server u-select\",attrs:{\"placeholder\":\"选择服务器\",\"size\":\"mini\"},model:{value:(_vm.server),callback:function ($$v) {_vm.server=$$v},expression:\"server\"}},[_c('el-option',{key:\"all\",attrs:{\"label\":\"全部服务器\",\"value\":\"\"}}),_vm._l((_vm.servers),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})})],2)],1),(_vm.id != 1)?_c('th',[_vm._v(\"团长&宣言\")]):_vm._e(),_c('th',[_vm._v(\"人气\")]),_c('th',[_vm._v(\"参与投票\")])])]),(_vm.id == 1)?_c('vote-item-v1',{attrs:{\"team_name\":_vm.team_name,\"server\":_vm.server,\"data\":_vm.data}}):_c('vote-item-v2',{attrs:{\"team_name\":_vm.team_name,\"server\":_vm.server,\"data\":_vm.data,\"vote-team\":_vm.voteTeam}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { $team } from \"@jx3box/jx3box-common/js/https.js\";\n\nfunction getAllJoinedTeams(id) {\n    if (id == 1) {\n        return $team()\n            .get(`/api/team/rank/events/${id}/all-teams`, {\n                params: {\n                    return_all: 1,\n                },\n            })\n            .then((res) => {\n                return res.data.data.list || [];\n            });\n    } else {\n        return $team()\n            .get(`/api/team/rank/events/${id}/all-teams/v2`, {\n                params: {\n                    status: 1,\n                },\n            })\n            .then((res) => {\n                return res.data.data || [];\n            });\n    }\n}\n\nfunction doVote(event_id, team_id) {\n    if (event_id == 1) {\n        return $team().post(\n            `/api/team/events/${event_id}/vote-team/${team_id}`\n        );\n    } else {\n        return $team({ popType: \"alert\" }).post(`/api/team/rank/vote`,'',{\n            params: {\n                event_id: ~~event_id,\n                team_id: ~~team_id,\n            },\n        });\n    }\n}\n\nfunction getVoteStatus(event_id) {\n    return $team({ mute: true }).get(`/api/team/events/${event_id}/vote-team/status`);\n}\n\nexport { getAllJoinedTeams, doVote, getVoteStatus };\n","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.list && _vm.list.length)?_c('tbody',_vm._l((_vm.list),function(item,i){return _c('tr',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hasCondition || _vm.isMatched(item)),expression:\"!hasCondition || isMatched(item)\"}],key:i},[_c('td',[_c('i',{staticClass:\"u-ranking\"},[_vm._v(_vm._s(i + 1))])]),_c('td',[_c('a',{attrs:{\"href\":_vm.teamLink(item.team_id),\"target\":\"_blank\"}},[_c('img',{staticClass:\"u-logo\",attrs:{\"loading\":\"lazy\",\"src\":_vm.teamLogo(item.logo),\"alt\":item.name}})])]),_c('td',[_c('a',{staticClass:\"u-name\",attrs:{\"href\":_vm.teamLink(item.team_id),\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])]),_c('td',[_c('span',{staticClass:\"u-server\"},[_vm._v(_vm._s(item.server))])]),_c('td',[_c('span',{staticClass:\"u-count\"},[_vm._v(_vm._s(item.guess))])]),_c('td',{staticClass:\"u-vote-wapper\"},[_c('button',{staticClass:\"u-vote\",class:{ disabled: item.clicked || !_vm.event_status || _vm.hasVoted(item) || !_vm.canVote },attrs:{\"disabled\":item.clicked || !_vm.event_status || _vm.hasVoted(item) || !_vm.canVote},on:{\"click\":function($event){return _vm.vote(item)}}})])])}),0):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <tbody v-if=\"list && list.length\">\n        <tr\n            v-for=\"(item, i) in list\"\n            :key=\"i\"\n            v-show=\"!hasCondition || isMatched(item)\"\n        >\n            <td>\n                <i class=\"u-ranking\">{{ i + 1 }}</i>\n            </td>\n            <td>\n                <a :href=\"teamLink(item.team_id)\" target=\"_blank\">\n                    <img\n                        loading=\"lazy\"\n                        class=\"u-logo\"\n                        :src=\"teamLogo(item.logo)\"\n                        :alt=\"item.name\"\n                    />\n                </a>\n            </td>\n            <td>\n                <a\n                    class=\"u-name\"\n                    :href=\"teamLink(item.team_id)\"\n                    target=\"_blank\"\n                >\n                    {{ item.name }}\n                </a>\n            </td>\n            <td>\n                <span class=\"u-server\">{{ item.server }}</span>\n            </td>\n            <td>\n                <span class=\"u-count\">{{ item.guess }}</span>\n            </td>\n            <td class=\"u-vote-wapper\">\n                <button\n                    class=\"u-vote\"\n                    :class=\"{ disabled: item.clicked || !event_status || hasVoted(item) || !canVote }\"\n                    :disabled=\"item.clicked || !event_status || hasVoted(item) || !canVote\"\n                    @click=\"vote(item)\"\n                ></button>\n            </td>\n        </tr>\n    </tbody>\n</template>\n\n<script>\n// import getWechatIframe from \"@/assets/js/wxpop.js\";\nimport {\n    __imgPath,\n    default_avatar,\n} from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { moment } from \"@jx3box/jx3box-common/js/moment\";\nimport { getThumbnail, getLink } from \"@jx3box/jx3box-common/js/utils\";\nimport User from \"@jx3box/jx3box-common/js/user.js\";\nimport { doVote } from \"@/service/vote.js\";\nexport default {\n    name: \"voteItemV1\",\n    props: [\"data\", \"team_name\", \"server\"],\n    data: function() {\n        return {\n            isLogin: User.isLogin(),\n\n            // dialog_visible: false,\n        };\n    },\n    computed: {\n        list: function() {\n            return this.data;\n        },\n        event_status: function() {\n            return this.$store.state.race.status || false;\n        },\n        search_team: function() {\n            return this.team_name;\n        },\n        search_server: function() {\n            return this.server;\n        },\n        hasCondition: function() {\n            return this.search_team || this.search_server;\n        },\n        vote_end: function (){\n            return this.$store.state.race.vote_end\n        },\n        canVote: function (){\n            return moment().isBefore(moment(this.vote_end))\n        }\n    },\n    methods: {\n        isMatched: function (item) {\n            if (this.search_team && this.search_server) {\n                return (\n                    item.name.includes(this.search_team) &&\n                    item.server == this.search_server\n                );\n            }\n            let matchName =\n                this.search_team && item.name.includes(this.search_team);\n            let matchServer =\n                this.search_server && item.server == this.search_server;\n            return matchName || matchServer;\n        },\n        vote: function(item) {\n            // 检查登录\n            if (!this.isLogin) {\n                User.toLogin();\n                return;\n            }\n\n            // 检查微信\n            // if (!User.hasBindwx()) {\n            //     this.$alert(getWechatIframe(), \"提示\", {\n            //         confirmButtonText: \"确定\",\n            //         dangerouslyUseHTMLString: true,\n            //     });\n            //     return;\n            // }\n\n            doVote(this.id, item.team_id).then((res) => {\n                this.$message({\n                    message: \"感谢您的参与，投票成功！\",\n                    type: \"success\",\n                    duration: 1000,\n                });\n\n                item.clicked = true;\n                item.guess = ~~item.guess + 1;\n                this.$forceUpdate();\n            });\n        },\n        hasVoted: function (item) {\n            return this.voteTeam.includes(String(item.team_id));\n        },\n        teamLogo: function(val) {\n            return val\n                ? getThumbnail(val, 96, true)\n                : getThumbnail(default_avatar, 96, true);\n        },\n        teamLink: function(val) {\n            return getLink(\"org\", val);\n        },\n    },\n    mounted: function() {},\n    components: {},\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./vote_item_v1.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./vote_item_v1.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./vote_item_v1.vue?vue&type=template&id=0daca972\"\nimport script from \"./vote_item_v1.vue?vue&type=script&lang=js\"\nexport * from \"./vote_item_v1.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.list && _vm.list.length)?_c('tbody',[_vm._l((_vm.list),function(item,i){return _c('tr',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hasCondition || _vm.isMatched(item)),expression:\"!hasCondition || isMatched(item)\"}],key:i},[_c('td',[_c('i',{staticClass:\"u-ranking\"},[_vm._v(_vm._s(i + 1))])]),_c('td',[_c('a',{attrs:{\"href\":_vm.teamLink(item.team_id),\"target\":\"_blank\"}},[_c('img',{staticClass:\"u-logo\",attrs:{\"loading\":\"lazy\",\"src\":_vm.teamLogo(item.logo),\"alt\":item.name}})])]),_c('td',[_c('a',{staticClass:\"u-name\",attrs:{\"href\":_vm.teamLink(item.team_id),\"target\":\"_blank\"}},[_vm._v(_vm._s(item.name))])]),_c('td',[_c('span',{staticClass:\"u-server\"},[_vm._v(_vm._s(item.server))])]),_c('td',[_c('div',[_c('a',{staticClass:\"u-leader\",attrs:{\"href\":_vm.authorLink(item.uid)}},[_vm._v(_vm._s(item.leader))]),_c('span',{staticClass:\"u-slogan\"},[_vm._v(_vm._s(item.slogan))])])]),_c('td',[_c('span',{staticClass:\"u-count\"},[_vm._v(_vm._s(item.count))])]),_c('td',{staticClass:\"u-vote-wapper\"},[(!_vm.hasVoted(item))?_c('button',{staticClass:\"u-vote\",class:{ disabled: item.clicked || !_vm.event_status || !_vm.canVote || _vm.voteTeam.length > _vm.voteLimit },attrs:{\"disabled\":item.clicked || !_vm.event_status || !_vm.canVote},on:{\"click\":function($event){return _vm.vote(item)}}}):_c('div',[_vm._v(\"已投票\")])])])}),_c('bindWxMp',{on:{\"update\":_vm.onBindWxMpUpdate},model:{value:(_vm.showBindWxMp),callback:function ($$v) {_vm.showBindWxMp=$$v},expression:\"showBindWxMp\"}})],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <tbody v-if=\"list && list.length\">\n        <tr v-for=\"(item, i) in list\" :key=\"i\" v-show=\"!hasCondition || isMatched(item)\">\n            <td>\n                <i class=\"u-ranking\">{{ i + 1 }}</i>\n            </td>\n            <td>\n                <a :href=\"teamLink(item.team_id)\" target=\"_blank\">\n                    <img loading=\"lazy\" class=\"u-logo\" :src=\"teamLogo(item.logo)\" :alt=\"item.name\" />\n                </a>\n            </td>\n            <td>\n                <a class=\"u-name\" :href=\"teamLink(item.team_id)\" target=\"_blank\">{{ item.name }}</a>\n            </td>\n            <td>\n                <span class=\"u-server\">{{ item.server }}</span>\n            </td>\n            <td>\n                <div>\n                    <a class=\"u-leader\" :href=\"authorLink(item.uid)\">{{ item.leader }}</a>\n                    <span class=\"u-slogan\">{{ item.slogan }}</span>\n                </div>\n            </td>\n            <!-- <td>\n                <span class=\"u-prize\" v-html=\"item.prize\"></span>\n            </td> -->\n            <td>\n                <span class=\"u-count\">{{ item.count }}</span>\n            </td>\n            <td class=\"u-vote-wapper\">\n                <button\n                    v-if=\"!hasVoted(item)\"\n                    class=\"u-vote\"\n                    :class=\"{ disabled: item.clicked || !event_status || !canVote || voteTeam.length > voteLimit }\"\n                    @click=\"vote(item)\"\n                    :disabled=\"item.clicked || !event_status || !canVote\"\n                    ></button>\n                <div v-else>已投票</div>\n            </td>\n        </tr>\n        <bindWxMp v-model=\"showBindWxMp\" @update=\"onBindWxMpUpdate\"></bindWxMp>\n    </tbody>\n</template>\n\n<script>\nimport { __imgPath, default_avatar, __cdn } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { moment } from \"@jx3box/jx3box-common/js/moment\";\nimport { getThumbnail, getLink, authorLink } from \"@jx3box/jx3box-common/js/utils\";\nimport User from \"@jx3box/jx3box-common/js/user.js\";\nimport { doVote } from \"@/service/vote.js\";\nimport { getUserInfo } from \"@/service/awards\";\nimport BindWxMp from \"@/components/misc/bind_wx_mp.vue\";\nimport { getConfig } from \"@jx3box/jx3box-common/js/api_misc\"\nexport default {\n    name: \"voteItemV2\",\n    props: [\"data\", \"team_name\", \"server\", \"voteTeam\"],\n    components: {\n        BindWxMp,\n    },\n    data: function () {\n        return {\n            isLogin: User.isLogin(),\n\n            profile: null,\n            showBindWxMp: false,\n\n            voteLimit: 0,\n        };\n    },\n    computed: {\n        id: function () {\n            return ~~this.$store.state.id;\n        },\n        list: function () {\n            return this.data;\n        },\n        event_status: function () {\n            return this.$store.state.race.status || false;\n        },\n        search_team: function () {\n            return this.team_name;\n        },\n        search_server: function () {\n            return this.server;\n        },\n        hasCondition: function () {\n            return this.search_team || this.search_server;\n        },\n        vote_end: function () {\n            return this.$store.state.race.vote_end;\n        },\n        canVote: function () {\n            return moment().isBefore(moment(this.vote_end));\n        },\n        isWechatVerified() {\n            return !!this.profile?.wechat_mp_openid;\n        },\n    },\n    mounted() {\n        this.getVoteLimit();\n        this.loadUser();\n    },\n    methods: {\n        isMatched: function (item) {\n            if (this.search_team && this.search_server) {\n                return item.name.includes(this.search_team) && item.server == this.search_server;\n            }\n            let matchName = this.search_team && item.name.includes(this.search_team);\n            let matchServer = this.search_server && item.server == this.search_server;\n            return matchName || matchServer;\n        },\n        vote: function (item) {\n            // 检查登录\n            if (!this.isLogin) {\n                User.toLogin();\n                return;\n            }\n\n            // 如果未绑定微信公众号，提示绑定\n            if (!this.isWechatVerified) {\n                this.$alert(\"请先绑定微信公众号，再进行投票\", \"消息\", {\n                    confirmButtonText: \"去绑定\",\n                    callback: (action) => {\n                        if (action == \"confirm\") {\n                            this.showBindWxMp = true;\n                        }\n                    },\n                });\n                return;\n            }\n\n            doVote(this.id, ~~item.team_id).then((res) => {\n                this.$message({\n                    message: \"感谢您的参与，投票成功！\",\n                    type: \"success\",\n                    duration: 1000,\n                });\n\n                item.clicked = true;\n                item.count = ~~item.count + 1;\n                this.$forceUpdate();\n            });\n            // if (this.voteTeam.length) return;\n            // const src = `${__imgPath}image/rank/vote/${this.id}.png`;\n            // this.$alert(`<img src=\"${src}\" alt=\"\" />`, \"打开微信扫码投票\", {\n            //     showConfirmButton: false,\n            //     dangerouslyUseHTMLString: true,\n            //     center: true,\n            // });\n        },\n        hasVoted: function (item) {\n            return this.voteTeam.includes(String(item.team_id));\n        },\n        teamLogo: function (val) {\n            return val ? getThumbnail(val, 96, true) : getThumbnail(default_avatar, 96, true);\n        },\n        teamLink: function (val) {\n            return getLink(\"org\", val);\n        },\n        authorLink,\n        loadUser() {\n            if (!this.isLogin) {\n                return;\n            }\n            getUserInfo().then((res) => {\n                this.profile = res.data.data;\n            });\n        },\n        onBindWxMpUpdate() {\n            this.loadUser();\n        },\n        // 获取投票上限\n        getVoteLimit() {\n            getConfig({key: \"rank_vote_limit\"}).then((res) => {\n                this.voteLimit = ~~res.data.data.val;\n            });\n        }\n    },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./vote_item_v2.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./vote_item_v2.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./vote_item_v2.vue?vue&type=template&id=844e1882\"\nimport script from \"./vote_item_v2.vue?vue&type=script&lang=js\"\nexport * from \"./vote_item_v2.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <!-- 投票竞猜页 -->\n    <div class=\"m-rank-vote\" v-loading=\"loading\" element-loading-text=\"加载中...\" element-loading-spinner=\"el-icon-loading\" element-loading-background=\"rgba(0, 0, 0, 0.3)\">\n        <!-- <div class=\"m-rank-vote-title\">\n            <img :src=\"vote_title_img\" />\n        </div> -->\n        <div class=\"m-rank-vote-header\" v-html=\"vote_note\" v-if=\"vote_note\"></div>\n        <table class=\"m-rank-vote-table\">\n            <thead>\n                <tr>\n                    <th width=\"120px\">排名</th>\n                    <th width=\"120px\"><!--logo--></th>\n                    <th width=\"120px\">\n                        团队\n                        <el-popover placement=\"top\" width=\"220\" trigger=\"click\">\n                            <el-input v-model=\"team_name\" placeholder=\"输入团队名关键字\" clearable></el-input>\n                            <el-button slot=\"reference\" type=\"text\"><i class=\"el-icon-search u-search-team\"></i></el-button>\n                        </el-popover>\n                    </th>\n                    <th>\n                        <el-select class=\"u-server u-select\" v-model=\"server\" placeholder=\"选择服务器\" size=\"mini\">\n                            <el-option key=\"all\" label=\"全部服务器\" value=\"\"> </el-option>\n                            <el-option v-for=\"item in servers\" :key=\"item\" :label=\"item\" :value=\"item\"> </el-option>\n                        </el-select>\n                    </th>\n                    <th v-if=\"id != 1\">团长&amp;宣言</th>\n                    <!-- <th v-if=\"id != 1\">团队提供奖品</th> -->\n                    <th>人气</th>\n                    <th>参与投票</th>\n                </tr>\n            </thead>\n            <vote-item-v1 :team_name=\"team_name\" :server=\"server\" :data=\"data\" v-if=\"id == 1\" />\n            <vote-item-v2 :team_name=\"team_name\" :server=\"server\" :data=\"data\" :vote-team=\"voteTeam\" v-else />\n        </table>\n    </div>\n</template>\n\n<script>\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport servers from \"@jx3box/jx3box-data/data/server/server_cn.json\";\nimport { getAllJoinedTeams, getVoteStatus } from \"@/service/vote.js\";\nimport vote_item_v1 from \"@/components/vote_item_v1.vue\";\nimport vote_item_v2 from \"@/components/vote_item_v2.vue\";\nexport default {\n    name: \"Vote\",\n    props: [],\n    data: function() {\n        return {\n            servers,\n            vote_title_img: __imgPath + \"image/rank/common/vote.png\",\n\n            loading: false,\n            data: [],\n            team_name: \"\",\n            server: \"\",\n            voteTeam: []\n        };\n    },\n    computed: {\n        id: function() {\n            return ~~this.$store.state.id;\n        },\n        vote_note: function() {\n            return this.$store.state.race.vote_note || \"\";\n        },\n    },\n    methods: {\n        loadData: function() {\n            this.loading = true;\n            getAllJoinedTeams(this.id)\n                .then((data) => {\n                    this.data = data;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        getStatus: function() {\n            getVoteStatus(this.id)\n                .then((res) => {\n                    this.voteTeam = Object.keys(res.data.data || {});\n                })\n                .catch((err) => {\n                    console.log(err);\n                });\n        },\n        init: function() {\n            this.loadData();\n            this.getStatus();\n        },\n    },\n    watch: {\n        id: {\n            immediate: true,\n            handler: function() {\n                this.init();\n            },\n        },\n    },\n    components: {\n        \"vote-item-v1\": vote_item_v1,\n        \"vote-item-v2\": vote_item_v2,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/race_vote.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Vote.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Vote.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Vote.vue?vue&type=template&id=dea1b7a8\"\nimport script from \"./Vote.vue?vue&type=script&lang=js\"\nexport * from \"./Vote.vue?vue&type=script&lang=js\"\nimport style0 from \"./Vote.vue?vue&type=style&index=0&id=dea1b7a8&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./bind_wx_mp.vue?vue&type=style&index=0&id=3ef32126&prod&lang=less\""],"sourceRoot":""}