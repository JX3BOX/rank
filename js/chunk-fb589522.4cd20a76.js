(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb589522"],{1450:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n("41cb");function i(){return Object(a["d"])().get("/api/team/my-team")}},3824:function(t,e,n){"use strict";n("64c5")},"64c5":function(t,e,n){},a440:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var a=n("41cb");function i(t){return Object(a["d"])().post("/api/team/rank/join",t)}function s(t,e){return Object(a["d"])().get("/api/team/rank/my-records",{params:{event_id:t}})}},ab06:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-superstar-join"},[e("div",{staticClass:"m-main"},[e("div",{staticClass:"u-content"},[e("div",{staticClass:"u-logo"},[e("img",{attrs:{src:t.imgurl+"baoming/logo.png",width:"112"}})]),e("div",{staticClass:"u-title"},[e("img",{attrs:{src:t.imgurl+"baoming/bm.png",height:"38"}})]),t.isLogin?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-join"},[e("div",{staticClass:"m-join-notice",domProps:{innerHTML:t._s(t.notice)}}),t.loading||t.status?t._e():e("el-form",{ref:"form",staticClass:"m-join-form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"报名活动"}},[e("el-select",{attrs:{placeholder:"请选择活动"},model:{value:t.form.event_id,callback:function(e){t.$set(t.form,"event_id",e)},expression:"form.event_id"}},t._l(t.events,(function(t){return e("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})})),1)],1),e("el-form-item",{attrs:{label:"选择团队"}},[e("el-select",{attrs:{placeholder:"请选择团队"},on:{change:t.updateTeam},model:{value:t.form.team_id,callback:function(e){t.$set(t.form,"team_id",e)},expression:"form.team_id"}},t._l(t.teams,(function(n){return e("el-option",{key:n.ID,attrs:{label:n.name,value:n.ID}},[e("span",{staticClass:"m-join-team-item"},[e("b",{staticClass:"u-team-name"},[t._v(t._s(n.name))]),e("span",{staticClass:"u-team-id"},[t._v("(ID:"+t._s(n.ID)+")")]),e("span",{staticClass:"u-team-server"},[t._v(t._s(n.server))])])])})),1),t.teams&&t.teams.length?t._e():e("div",{staticClass:"u-tip"},[t._v("还没有团队？"),e("a",{attrs:{href:"/team",target:"_blank"}},[t._v("创建团队")])])],1),e("el-form-item",{attrs:{label:"参赛宣言"}},[e("el-input",{attrs:{placeholder:"为您的团队打CALL,将显示在游戏内",maxlength:20,"show-word-limit":""},model:{value:t.form.slogan,callback:function(e){t.$set(t.form,"slogan",e)},expression:"form.slogan"}})],1),e("div",{staticClass:"u-btns"},[e("el-button",{staticClass:"u-btn",attrs:{type:"primary",disabled:!t.ready},on:{click:t.submit}},[t._v("报名")]),e("div",{staticClass:"u-footer"},[e("a",{attrs:{href:"/notice/32280",target:"_blank"}},[e("i",{staticClass:"el-icon-info"}),t._v(" "),e("b",[t._v("点击查看百强活动细则")])])])],1)],1),t.status?e("div",{staticClass:"m-join m-join-done"},[e("h1",{staticClass:"u-title",class:t.statusText[t.audit_status].class},[t._v(t._s(t.statusText[t.audit_status].name))]),e("div",[e("p",[t._v(" 活动："),e("strong",[t._v(t._s(t.result.event.name))])]),e("p",[t._v(" 团队："),e("strong",[t._v(t._s(t.result.eventRecord.name))])])])]):t._e()],1):e("div",{staticClass:"u-no-login"},[e("p",[t._v("你尚未登录")]),e("el-button",{attrs:{type:"primary"},on:{click:t.goLogin}},[t._v("登录")])],1)])])])},i=[],s=n("ade3"),o=n("b85c"),r=(n("d3b7"),n("159b"),n("2ef0"),n("d087")),c=n("a440"),u=n("1450"),d=n("c9d2"),l=n("cc9a"),m=Object(s["a"])({components:{},data:function(){return{imgurl:"https://img.jx3box.com/topic/menpaitiantuan/",form:{event_id:"",team_id:"",slogan:""},events:[],teams:[],loading:!0,status:!1,audit_status:0,statusText:[{name:"待审核",class:"u-orange"},{name:"已报名",class:""}],joined_team_name:"",isLogin:d["a"].isLogin(),result:{event:{name:"活动名称"},eventRecord:{name:"团队名称"}},processing:!1,notice:""}},computed:{ready:function(){return this.form.event_id&&this.form.team_id&&this.form.slogan&&!this.status&&!this.processing},event_id:function(){return this.form.event_id},team_name:function(){var t,e=this.form.team_id,n="",a=Object(o["a"])(this.teams);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.ID==e){n=i.name;break}}}catch(s){a.e(s)}finally{a.f()}return n}},methods:{submit:function(){var t=this;this.$alert("报名后资料将不可再更改，更多咨询请联系认证团长Q群【1048059072】","消息",{confirmButtonText:"确定",callback:function(e){"confirm"==e&&(t.processing=!0,Object(c["b"])(t.form).then((function(e){t.$message({message:"报名成功,请等待审核",type:"success"}),t.status=!0,t.audit_status=e.data.data.status||0,t.joined_team_name=t.team_name,t.$forceUpdate()})).finally((function(){t.processing=!1})))}})},updateTeam:function(){var t=this;this.teams.forEach((function(e){e.ID==t.form.team_id&&(t.result.eventRecord.name=e.name)}))},loadEvents:function(){var t=this;return Object(r["d"])({status:1}).then((function(e){t.events=e.data.data.list||[],t.form.event_id=t.events[0].ID||t.event_id,t.$forceUpdate()}))},loadTeams:function(){var t=this;return Object(u["a"])().then((function(e){t.teams=e.data.data.list||[],t.form.team_id=t.team_id,t.$forceUpdate()}))},checkJoin:function(){var t=this;this.form.event_id&&Object(c["a"])(this.form.event_id).then((function(e){t.result=e.data.data,e.data.data.hasJoined&&(t.audit_status=e.data.data.eventRecord.status,2!=t.audit_status&&(t.status=!0,t.joined_team_name=e.data.data.eventRecord.name,t.$forceUpdate())),t.loading=!1}))},goLogin:function(){d["a"].toLogin()},loadNotice:function(){var t=this;Object(l["a"])("rank-join").then((function(e){t.notice=e}))},init:function(){this.loadEvents(),this.loadTeams(),this.loadNotice()}},watch:{event_id:function(t){this.checkJoin()}},created:function(){this.isLogin&&this.init()}},"components",{}),f=m,v=(n("3824"),n("2877")),p=Object(v["a"])(f,a,i,!1,null,"66057a95",null);e["default"]=p.exports},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d28b"),n("d9e2"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("06c5");function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(a["a"])(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,o=t},f:function(){try{r||null==n["return"]||n["return"]()}finally{if(c)throw o}}}}},d087:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return u}));var a=n("41cb");function i(t){return Object(a["d"])().post("/api/team/rank/events")}function s(t,e){return Object(a["d"])().put("/api/team/rank/events/".concat(t),e)}function o(t){return Object(a["d"])().put("/api/team/rank/events/".concat(t,"/active"))}function r(t){return Object(a["d"])().put("/api/team/rank/events/".concat(t,"/stop"))}function c(t){return Object(a["d"])().get("/api/team/rank/events/"+t)}function u(t){return Object(a["d"])().get("/api/team/rank/events",{params:t})}}}]);
//# sourceMappingURL=chunk-fb589522.4cd20a76.js.map