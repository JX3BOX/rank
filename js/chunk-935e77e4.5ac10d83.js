(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-935e77e4"],{"13d5":function(t,e,i){"use strict";var s=i("23e7"),a=i("d58f").left,n=i("a640"),o=i("2d00"),r=i("605d"),c=!r&&o>79&&o<83,l=c||!n("reduce");s({target:"Array",proto:!0,forced:l},{reduce:function(t){var e=arguments.length;return a(this,t,e,e>1?arguments[1]:void 0)}})},"40a4":function(t,e,i){"use strict";i.r(e);i("a15b");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-lover-join m-lover-page wp"},[e("div",{staticClass:"u-page-title"},[e("img",{staticClass:"u-img",attrs:{src:"".concat(t.__imgRoot,"join-title.png")}})]),t.success?[e("div",{staticClass:"m-success"},[e("img",{staticClass:"u-img",attrs:{src:"".concat(t.__imgRoot,"success.svg")}}),e("span",[t._v("报名成功，你的报名信息如下")])])]:t._e(),t.isLogin?[e("div",{staticClass:"m-lover-box m-lover-certificate"},[t.list.length?[t.certificate?[e("certificate",{attrs:{data:t.certificate}}),t.join?t._e():e("div",{staticClass:"u-button",on:{click:t.setLover}},[t._v("设定为主情缘")])]:e("div",{staticClass:"no-certificate"},[t._v("ღ 暂无绑定的主情缘 ღ")])]:e("div",{staticClass:"no-certificate"},[t._v("ღ 请按教程在游戏内绑定情缘 ღ")])],2),t.join?t._e():e("div",{staticClass:"m-lover-list"},t._l(t.list,(function(i,s){return e("div",{key:i.id,staticClass:"m-lover-box",on:{click:function(e){return t.changeLover(s)}}},[e("div",{staticClass:"u-user"},[e("div",{staticClass:"u-avatar"},[e("el-avatar",{staticClass:"u-avatar-pic",attrs:{shape:"circle",size:30,src:i.user_info_1.avatar}})],1),e("span",{staticClass:"u-name"},[t._v(t._s(i.user_info_1.display_name))])]),e("div",{staticClass:"u-user"},[e("div",{staticClass:"u-avatar"},[e("el-avatar",{staticClass:"u-avatar-pic",attrs:{shape:"circle",size:30,src:i.user_info_2.avatar}})],1),e("span",{staticClass:"u-name"},[t._v(t._s(i.user_info_2.display_name))])])])})),0),t.entry?e("div",{staticClass:"m-lover-box m-lover-enroll"},[e("h3",[t._v("情缘杯报名")]),e("el-form",{ref:"form",class:["m-lover-form",{disabled:t.join}],attrs:{disabled:t.join,model:t.form,rules:t.rules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"队伍名",prop:"team_name"}},[e("el-input",{model:{value:t.form.team_name,callback:function(e){t.$set(t.form,"team_name",t._n(e))},expression:"form.team_name"}})],1),e("el-form-item",{attrs:{label:"参赛宣言",prop:"slogan"}},[e("el-input",{attrs:{type:"textarea",rows:2},model:{value:t.form.slogan,callback:function(e){t.$set(t.form,"slogan",e)},expression:"form.slogan"}})],1),e("el-form-item",{attrs:{label:"合照上传"}},[e("uploadImage",{attrs:{"max-size":30},model:{value:t.form.images[0],callback:function(e){t.$set(t.form.images,0,e)},expression:"form.images[0]"}})],1)],1),e("div",{class:["u-submit",{disabled:t.join}],on:{click:t.toJoin}},[e("img",{staticClass:"u-img",attrs:{src:"".concat(t.__imgRoot,"join.png")}})])],1):t._e()]:e("div",{staticClass:"m-lover-box no-login"},[e("h3",[t._v("请登录后进行报名")]),e("div",{staticClass:"u-button",on:{click:t.toLogin}},[t._v("点击登录")])])],2)},a=[],n=i("53ca");i("a4d3"),i("e01a"),i("8172"),i("d9e2"),i("efec"),i("a9e3"),i("d3b7");function o(t,e){if("object"!=Object(n["a"])(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=Object(n["a"])(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function r(t){var e=o(t,"string");return"symbol"==Object(n["a"])(e)?e:String(e)}function c(t,e,i){return e=r(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i("4de4");var l=i("c9d2"),u=i("b11b"),f=i("85e4"),d=(i("13d5"),function(){var t=this,e=t._self._c;return e("div",[e("el-upload",{ref:"upload",attrs:{action:"https://cms.jx3box.com/api/cms/upload","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"auto-upload":!1,"file-list":t.fileList,limit:t.maxCount,accept:t.acceptedExtensions.reduce((function(t,e){return t+".".concat(e,",")}),""),multiple:"","with-credentials":"","on-exceed":t.onExceed,"on-change":t.onChange,"on-success":t.onSuccess,"on-error":t.onError}},[e("i",{staticClass:"el-icon-plus"}),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 最多上传 "+t._s(t.maxCount)+" 张 "+t._s(t.acceptedExtensions.join(" / ").toUpperCase())+" 格式图片，单张图片不能超过 "+t._s(t.maxSize/1024/1024)+" MB ")])]),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("img",{attrs:{width:"60%",src:t.dialogImageUrl,alt:""}})])],1)}),m=[],v=(i("99af"),{data:function(){return{dialogImageUrl:"",dialogVisible:!1,fileList:[],successList:[],acceptedExtensions:["jpg","jpeg","png","gif"],maxCount:5,maxSize:2097152}},methods:{handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},onExceed:function(){this.$notify({title:"",message:"最多上传 ".concat(this.maxCount," 张图片！"),type:"error",duration:3e3,position:"bottom-right"})},onChange:function(t,e){"ready"==t.status&&(t.size>this.maxSize?(this.$notify({title:"",message:"单张图片大小不能超过 ".concat(this.maxSize/1024/1024," MB！"),type:"error",duration:3e3,position:"bottom-right"}),e.pop()):this.fileList=e)},upload:function(){this.fileList.length>0?this.$refs.upload.submit():this.$emit("onFinish",[])},onSuccess:function(t){this.successList=this.successList.concat(t.data),this.successList.length==this.fileList.length&&(this.$emit("onFinish",this.successList||[]),this.fileList=[],this.successList=[])},onError:function(){this.$notify({title:"",message:"图片上传失败!",type:"error",duration:3e3,position:"bottom-right"}),this.$emit("onError"),this.fileList=[]}}}),p=v,h=i("2877"),g=Object(h["a"])(p,d,m,!1,null,null,null),b=g.exports,_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-certificate"},[t._v("情缘证")])},j=[],y={name:"certificate",props:{data:{type:Object,default:function(){}}},data:function(){return{}},computed:{},methods:{}},C=y,x=Object(h["a"])(C,_,j,!1,null,null,null),L=x.exports,w={name:"LoverJoin",inject:["__imgRoot"],components:{certificate:L,uploadImage:b},data:function(){return{lover:!1,isLogin:l["a"].isLogin(),list:[],form:c(c({team_name:"",images:[],lover_jx3id:"",phone:"",qq:"",remark:"",server:"",slogan:""},"team_name",""),"user_jx3id",""),rules:{team_name:[{required:!0,message:"请输入队伍名",trigger:"blur"}]},certificate:null,join:!1,entry:!1,success:!1}},computed:{loverId:function(){return this.$store.state.loverId}},watch:{isLogin:{immediate:!0,handler:function(t){t&&this.loadMyLover()}},certificate:{immediate:!0,handler:function(t){t&&this.getMyEventStatus()}},join:function(t){t&&(this.entry=!0)}},methods:{authorLink:f["authorLink"],toLogin:function(){l["a"].toLogin()},loadMyLover:function(){var t=this;Object(u["d"])().then((function(e){var i=e.data.data.list||[];t.list=i,t.certificate=i.filter((function(t){return 1===t.star}))[0]||null}))},changeLover:function(t){this.certificate=this.list[t]},setLover:function(){var t=this;Object(u["f"])(this.certificate.id).then((function(){t.entry=!0,t.$notify({title:"主情缘设置成功",type:"success"})}))},getMyEventStatus:function(){var t=this;Object(u["c"])(this.loverId).then((function(e){var i=e.data.data||null;t.form=i||t.$options.data().form,t.join=!!i,t.entry=!0}))},toJoin:function(){var t=this;this.join||Object(u["e"])(this.form).then((function(){t.join=!0,t.success=!0,t.$notify({title:"报名成功",type:"success"})}))}}},k=w,$=(i("ee67"),Object(h["a"])(k,s,a,!1,null,null,null));e["default"]=$.exports},"51eb":function(t,e,i){"use strict";var s=i("825a"),a=i("485a"),n=TypeError;t.exports=function(t){if(s(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw new n("Incorrect hint");return a(this,t)}},8172:function(t,e,i){"use strict";var s=i("e065"),a=i("57b9");s("toPrimitive"),a()},a15b:function(t,e,i){"use strict";var s=i("23e7"),a=i("e330"),n=i("44ad"),o=i("fc6a"),r=i("a640"),c=a([].join),l=n!==Object,u=l||!r("join",",");s({target:"Array",proto:!0,forced:u},{join:function(t){return c(o(this),void 0===t?",":t)}})},b25c:function(t,e,i){},d58f:function(t,e,i){"use strict";var s=i("59ed"),a=i("7b0b"),n=i("44ad"),o=i("07fa"),r=TypeError,c="Reduce of empty array with no initial value",l=function(t){return function(e,i,l,u){var f=a(e),d=n(f),m=o(f);if(s(i),0===m&&l<2)throw new r(c);var v=t?m-1:0,p=t?-1:1;if(l<2)while(1){if(v in d){u=d[v],v+=p;break}if(v+=p,t?v<0:m<=v)throw new r(c)}for(;t?v>=0:m>v;v+=p)v in d&&(u=i(u,d[v],v,f));return u}};t.exports={left:l(!1),right:l(!0)}},ee67:function(t,e,i){"use strict";i("b25c")},efec:function(t,e,i){"use strict";var s=i("1a2d"),a=i("cb2d"),n=i("51eb"),o=i("b622"),r=o("toPrimitive"),c=Date.prototype;s(c,r)||a(c,r,n)}}]);
//# sourceMappingURL=chunk-935e77e4.5ac10d83.js.map