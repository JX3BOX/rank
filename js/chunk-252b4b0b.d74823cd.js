(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-252b4b0b"],{"8e22":function(t,e,a){"use strict";a("90d3")},"90d3":function(t,e,a){},ab06:function(t,e,a){"use strict";a.r(e);a("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-sign-up"},[e("div",{staticClass:"u-shadow"},[e("div",{staticClass:"u-top"},[e("img",{attrs:{src:t.imgurl+"top.jpg"}}),e("div",{staticClass:"u-title"},[e("img",{attrs:{src:t.imgurl+"baoming/bm.png",width:"86.5"}})])]),e("div",{staticClass:"u-center"},[e("div",{staticClass:"p-superstar-join"},[e("div",{staticClass:"m-main"},[e("div",{staticClass:"u-content"},[t.isLogin?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-join"},[e("div",{staticClass:"m-join-notice",domProps:{innerHTML:t._s(t.notice)}}),t.loading||t.status?t._e():e("el-form",{ref:"form",staticClass:"m-join-form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"报名活动"}},[e("el-select",{attrs:{placeholder:"请选择活动"},model:{value:t.form.event_id,callback:function(e){t.$set(t.form,"event_id",e)},expression:"form.event_id"}},t._l(t.events,(function(t){return e("el-option",{key:t.ID,attrs:{label:t.name,value:t.ID}})})),1)],1),e("el-form-item",{attrs:{label:"选择团队"}},[e("el-select",{attrs:{placeholder:"请选择团队"},on:{change:t.updateTeam},model:{value:t.form.team_id,callback:function(e){t.$set(t.form,"team_id",e)},expression:"form.team_id"}},t._l(t.teams,(function(a){return e("el-option",{key:a.ID,attrs:{label:a.name,value:a.ID}},[e("span",{staticClass:"m-join-team-item"},[e("b",{staticClass:"u-team-name"},[t._v(t._s(a.name))]),e("span",{staticClass:"u-team-id"},[t._v("(ID:"+t._s(a.ID)+")")]),e("span",{staticClass:"u-team-server"},[t._v(t._s(a.server))])])])})),1),t.teams&&t.teams.length?t._e():e("div",{staticClass:"u-tip"},[t._v(" 还没有团队？"),e("a",{attrs:{href:"/team",target:"_blank"}},[t._v("创建团队")])])],1),e("el-form-item",{attrs:{label:"参赛宣言"}},[e("el-input",{attrs:{placeholder:"为您的团队打CALL,将显示在游戏内",maxlength:20,"show-word-limit":""},model:{value:t.form.slogan,callback:function(e){t.$set(t.form,"slogan",e)},expression:"form.slogan"}})],1),e("div",{staticClass:"u-btns"},[e("el-button",{staticClass:"u-btn",attrs:{type:"primary",disabled:!t.ready},on:{click:t.submit}},[t._v("报名")]),e("div",{staticClass:"u-footer"},[e("a",{attrs:{href:"/notice/32280",target:"_blank"}},[e("i",{staticClass:"el-icon-info"}),t._v(" "),e("b",[t._v("点击查看百强活动细则")])])])],1)],1),t.status?e("div",{staticClass:"m-join-done"},[e("h1",{staticClass:"u-status-title",class:t.statusText[t.audit_status].class},[t._v(" "+t._s(t.statusText[t.audit_status].name)+" ")]),e("div",[e("p",[t._v(" 活动："),e("strong",[t._v(t._s(t.result.event.name))])]),e("p",[t._v(" 团队："),e("strong",[t._v(t._s(t.result.eventRecord.name))])])])]):t._e()],1):e("div",{staticClass:"u-no-login"},[e("p",[t._v("你尚未登录")]),e("el-button",{attrs:{type:"primary"},on:{click:t.goLogin}},[t._v("登录")])],1)])])])]),e("div",{staticClass:"u-bottom"},[e("img",{attrs:{src:t.imgurl+"bottom.jpg"}})])])])},s=[],i=a("ade3"),o=(a("a4d3"),a("e01a"),a("d28b"),a("d9e2"),a("d3b7"),a("3ca3"),a("ddb0"),a("06c5"));function r(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Object(o["a"])(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return r=t.done,t},e:function(t){c=!0,i=t},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(c)throw i}}}}a("159b"),a("2ef0");var c=a("d087"),u=a("41cb");function l(t){return Object(u["d"])().post("/api/team/rank/join",t)}function d(t,e){return Object(u["d"])().get("/api/team/rank/my-records",{params:{event_id:t}})}function m(){return Object(u["d"])().get("/api/team/my-team")}var f=a("c9d2"),v=a("cc9a"),_=Object(i["a"])({components:{},data:function(){return{imgurl:"https://img.jx3box.com/topic/menpaitiantuan/",form:{event_id:"",team_id:"",slogan:""},events:[],teams:[],loading:!0,status:!1,audit_status:0,statusText:[{name:"待审核",class:"u-orange"},{name:"已报名",class:""}],joined_team_name:"",isLogin:f["a"].isLogin(),result:{event:{name:"活动名称"},eventRecord:{name:"团队名称"}},processing:!1,notice:""}},computed:{ready:function(){return this.form.event_id&&this.form.team_id&&this.form.slogan&&!this.status&&!this.processing},event_id:function(){return this.form.event_id},team_name:function(){var t,e=this.form.team_id,a="",n=r(this.teams);try{for(n.s();!(t=n.n()).done;){var s=t.value;if(s.ID==e){a=s.name;break}}}catch(i){n.e(i)}finally{n.f()}return a}},methods:{submit:function(){var t=this;this.$alert("报名后资料将不可再更改，更多咨询请联系认证团长Q群【1048059072】","消息",{confirmButtonText:"确定",callback:function(e){"confirm"==e&&(t.processing=!0,l(t.form).then((function(e){t.$message({message:"报名成功,请等待审核",type:"success"}),t.status=!0,t.audit_status=e.data.data.status||0,t.joined_team_name=t.team_name,t.$forceUpdate()})).finally((function(){t.processing=!1})))}})},updateTeam:function(){var t=this;this.teams.forEach((function(e){e.ID==t.form.team_id&&(t.result.eventRecord.name=e.name)}))},loadEvents:function(){var t=this;return Object(c["b"])({status:1}).then((function(e){t.events=e.data.data.list||[],t.form.event_id=t.events[0].ID||t.event_id,t.$forceUpdate()}))},loadTeams:function(){var t=this;return m().then((function(e){t.teams=e.data.data.list||[],t.form.team_id=t.team_id,t.$forceUpdate()}))},checkJoin:function(){var t=this;this.form.event_id&&d(this.form.event_id).then((function(e){t.result=e.data.data,e.data.data.hasJoined&&(t.audit_status=e.data.data.eventRecord.status,2!=t.audit_status&&(t.status=!0,t.joined_team_name=e.data.data.eventRecord.name,t.$forceUpdate())),t.loading=!1}))},goLogin:function(){f["a"].toLogin()},loadNotice:function(){var t=this;Object(v["a"])("rank-join").then((function(e){t.notice=e}))},init:function(){this.loadEvents(),this.loadTeams(),this.loadNotice()}},watch:{event_id:function(t){this.checkJoin()}},created:function(){this.isLogin&&this.init()}},"components",{}),p=_,b=(a("8e22"),a("2877")),h=Object(b["a"])(p,n,s,!1,null,"57b4b1ef",null);e["default"]=h.exports},d087:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i}));var n=a("41cb");function s(t){return Object(n["d"])().get("/api/team/rank/events/"+t)}function i(t){return Object(n["d"])().get("/api/team/rank/events",{params:t})}}}]);
//# sourceMappingURL=chunk-252b4b0b.d74823cd.js.map