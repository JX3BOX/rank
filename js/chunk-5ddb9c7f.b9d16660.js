(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ddb9c7f"],{"3e2b":function(t,e,a){},"81a8":function(t,e,a){"use strict";a.r(e);a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-rank-video",attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e("div",{staticClass:"m-rank-video-title"},[e("img",{attrs:{src:t.video_title_img}})]),e("el-row",{staticClass:"m-rank-boss",attrs:{gutter:20,type:"flex",justify:"space-between"}},[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"u-boss",class:{on:""==t.current_boss},on:{click:function(e){return t.changeBoss(0)}}},[e("span",{staticClass:"u-boss-name"},[t._v("全部")])])]),t._l(t.bossList,(function(a,s){return e("el-col",{key:a+s,attrs:{span:3}},[e("div",{staticClass:"u-boss",class:{on:s==t.current_boss},on:{click:function(e){return t.changeBoss(s)}}},[e("span",{staticClass:"u-boss-name"},[t._v(t._s(a))])])])}))],2),e("div",{staticClass:"m-rank-video-content"},[t.data&&t.data.length?[e("el-row",{staticClass:"m-rank-video-list",attrs:{gutter:20}},t._l(t.data,(function(a,s){return e("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.current_boss||a.aid==t.current_boss,expression:"!current_boss || item.aid == current_boss"}],key:s,attrs:{span:8}},[e("div",{staticClass:"m-rank-video-item"},[e("a",{staticClass:"u-video",attrs:{href:a.url,target:"_blank"}},[e("img",{staticClass:"u-live-cover",attrs:{src:t._f("videoCover")(a.aid),loading:"lazy"}}),e("i",{staticClass:"u-player"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 511.999 511.999","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("linearGradient",{attrs:{id:"a",gradientUnits:"userSpaceOnUse",x1:"35.029",y1:"257.313",x2:"478.029",y2:"257.313",gradientTransform:"matrix(.9983 0 0 -.9983 -.085 512.866)"}},[e("stop",{attrs:{offset:"0","stop-color":"#00f2fe"}}),e("stop",{attrs:{offset:".021","stop-color":"#03effe"}}),e("stop",{attrs:{offset:".293","stop-color":"#24d2fe"}}),e("stop",{attrs:{offset:".554","stop-color":"#3cbdfe"}}),e("stop",{attrs:{offset:".796","stop-color":"#4ab0fe"}}),e("stop",{attrs:{offset:"1","stop-color":"#4facfe"}})],1),e("path",{attrs:{d:"M104.967 511.999l-.313-.001c-38.47-.21-69.77-31.983-69.77-70.829V70.058c0-25.691 13.39-48.512 35.819-61.041 22.429-12.531 48.88-11.971 70.758 1.497l302.4 186.405c20.869 12.848 33.305 35.16 33.255 59.678-.05 24.52-12.576 46.781-33.507 59.55L224.997 449.999c-9.405 5.758-21.695 2.802-27.452-6.602-5.758-9.404-2.802-21.694 6.602-27.452l218.639-133.869c9.139-5.576 14.378-14.886 14.4-25.56.022-10.673-5.179-20.004-14.268-25.601L120.517 44.511c-9.374-5.771-20.718-6.011-30.339-.636-9.62 5.375-15.364 15.162-15.364 26.183V441.17c0 18.385 15.541 30.819 30.056 30.898 4.735.001 10.08-1.726 15.553-5.064 9.411-5.743 21.698-2.768 27.441 6.645 5.743 9.413 2.767 21.698-6.645 27.441-11.702 7.14-24.23 10.908-36.252 10.909z",fill:"url(#a)"}})],1)])]),e("div",{staticClass:"u-info"},[e("a",{attrs:{href:t._f("teamLink")(a.team_id),target:"_blank"}},[e("img",{staticClass:"u-team-logo",attrs:{src:t._f("liveAvatar")(a.logo),loading:"lazy"}})]),e("div",{staticClass:"u-team"},[e("span",{staticClass:"u-label"},[t._v("团队 : ")]),e("a",{staticClass:"u-team-name",attrs:{href:t._f("teamLink")(a.team_id),target:"_blank"}},[t._v(t._s(a.name))])]),e("div",{staticClass:"u-room"},[e("a",{staticClass:"u-room-name",attrs:{href:a.url,target:"_blank"}},[t._v(" "+t._s(a.title)+" ")])])])])])})),1),e("el-pagination",{staticClass:"m-rank-video-pages m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next,jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})]:e("el-alert",{staticClass:"m-archive-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}})],2),e("el-dialog",{staticClass:"m-rank-video-dialog",attrs:{title:"添加/编辑视频",visible:t.dialogVisible,width:"30%","append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"m-rank-video-form"},[e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"团队ID"}},[e("el-input",{attrs:{placeholder:"请输入正确的团队数字编号"},model:{value:t.video.team_id,callback:function(e){t.$set(t.video,"team_id",t._n(e))},expression:"video.team_id"}})],1),e("el-form-item",{attrs:{label:"成就ID"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.video.aid,callback:function(e){t.$set(t.video,"aid",t._n(e))},expression:"video.aid"}},t._l(t.bossList,(function(t,a){return e("el-option",{key:a,attrs:{label:t,value:a}})})),1)],1),e("el-form-item",{attrs:{label:"视频链接"}},[e("el-input",{attrs:{placeholder:"请输入视频网址"},model:{value:t.video.url,callback:function(e){t.$set(t.video,"url",e)},expression:"video.url"}})],1),e("el-form-item",{attrs:{label:"视频标题"}},[e("el-input",{attrs:{placeholder:"请注明XX视角"},model:{value:t.video.title,callback:function(e){t.$set(t.video,"title",e)},expression:"video.title"}})],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)])],1)},i=[],o=(a("d3b7"),a("159b"),a("65c2")),r=a("d0c8"),n=a("85e4"),l=a("c9d2"),c=a("9756"),u=a("2ef0"),d=a.n(u),g={props:[],data:function(){return{video_title_img:o["__imgPath"]+"image/rank/common/videos.png",data:[],per:24,page:1,total:1,loading:!1,servers:c,server:"",current_boss:"",isAdmin:l["a"].isAdmin(),isEditor:l["a"].isEditor(),dialogVisible:!1,video:{ID:"",team_id:"",event_id:"",aid:"",title:"",url:""}}},computed:{id:function(){return this.$store.state.id},params:function(){return{pageSize:this.per,pageIndex:this.page,aid:this.current_boss}},achieves:function(){return this.$store.state.achieves||[]},bossList:function(){var t={};return this.achieves.forEach((function(e){t[e.achievement_id]=e.name})),t},demo_video:function(){return{team_id:"",event_id:~~this.id,aid:"",title:"",url:""}}},methods:{changeBoss:function(t){this.current_boss=t,this.page=1,this.loadData()},loadData:function(){var t=this;this.loading=!0,Object(r["d"])(this.id,this.params).then((function(e){t.data=e.data.data.list,t.page=e.data.data.page.index,t.total=e.data.data.page.total})).finally((function(){t.loading=!1}))},del:function(t){var e=this;this.$alert("确认删除吗","消息",{confirmButtonText:"确定",callback:function(a){"confirm"==a&&Object(r["b"])(t).then((function(t){e.$message({type:"success",message:"删除成功"}),location.reload()}))}})},edit:function(t){this.dialogVisible=!0,this.video=t},add:function(){this.dialogVisible=!0,this.video=d.a.cloneDeep(this.demo_video)},submit:function(){var t=this;this.video.ID?Object(r["e"])(this.video.ID,this.video).then((function(e){t.$message({type:"success",message:"更新成功"}),t.dialogVisible=!1})):Object(r["a"])(this.video).then((function(e){t.$message({type:"success",message:"发布成功"}),t.dialogVisible=!1}))}},watch:{params:{deep:!0,handler:function(){this.loadData()}}},filters:{teamLogo:function(t){return t?Object(n["getThumbnail"])(t,240,!0):o["default_avatar"]},liveAvatar:function(t){return t?Object(n["getThumbnail"])(t,136,!0):o["default_avatar"]},teamLink:function(t){return Object(n["getLink"])("org",t)},videoCover:function(t){return o["__imgPath"]+"image/rank/videos/".concat(t,".png")}},created:function(){this.loadData()},components:{}},m=g,p=(a("d814"),a("2877")),f=Object(p["a"])(m,s,i,!1,null,null,null);e["default"]=f.exports},9756:function(t){t.exports=JSON.parse('["缘起稻香","天宝盛世","剑啸江湖","蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","青梅煮酒","共結來緣","傲血戰意","巔峰再起","江海雲夢"]')},c9d2:function(t,e,a){"use strict";var s=a("85e4"),i=a("65c2"),o=a("c5d8"),r=a("c7b3"),n=a.n(r);function l(t){return console.log(t.response),Promise.reject(t)}function c(t,e){t["interceptors"]["response"].use((function(t){return t.data.code?Promise.reject(t):t}),(function(t){return l(t)}))}function u(t,e){t["interceptors"]["response"].use((function(t){return t.data.code?Promise.reject(t):t}),(function(t){return l(t)}))}function d(t){let e=t&&t.domain||i.__cms,a={withCredentials:!0,auth:{username:localStorage&&localStorage.getItem("token")||"",password:"cms common request"},baseURL:e,headers:{}};const s=n.a.create(a);return u(s,t),s}function g(t){let e=t&&t.domain||i.__next,a={withCredentials:!0,auth:{username:localStorage&&localStorage.getItem("token")||"",password:"next common request"},baseURL:e,headers:{}};const s=n.a.create(a);return c(s,t),s}function m(t){let e=t&&Object.assign(t,{domain:i.__pay})||{domain:i.__pay};return g(e)}let{__Links:p,default_avatar:f,__server:h,__userLevel:v}=i,{tokenExpires:_}=o;class b{constructor(){this.expires=_,this.created_at=0,this.logged_in=!1,this.profile={},this.anonymous={uid:0,group:0,name:"未登录",status:0,bind_wx:0,avatar:Object(s["showAvatar"])(null,"s"),avatar_origin:f},this.asset=""}check(){return this.isLogin()?(this.profile.uid=localStorage&&localStorage.getItem("uid"),this.profile.group=localStorage&&localStorage.getItem("group")||1,this.profile.token=localStorage&&localStorage.getItem("token"),this.profile.name=localStorage&&localStorage.getItem("name"),this.profile.status=localStorage&&localStorage.getItem("status"),this.profile.bind_wx=localStorage&&localStorage.getItem("bind_wx"),this.profile.avatar_origin=localStorage&&localStorage.getItem("avatar")||f,this.profile.avatar=Object(s["showAvatar"])(this.profile.avatar_origin,"s")):this.profile=this.anonymous,this}refresh(t,e){return localStorage.setItem(t,e)}isLogin(){return this.created_at=localStorage.getItem("created_at")?localStorage.getItem("created_at"):-1/0,this.logged_in="true"==localStorage.getItem("logged_in"),this.logged_in&&Date.now()-this.created_at<this.expires}_save(t){localStorage.setItem("created_at",Date.now()),localStorage.setItem("logged_in",!0),localStorage.setItem("token",t.token),localStorage.setItem("uid",t.uid),localStorage.setItem("group",t.group),localStorage.setItem("name",t.name),localStorage.setItem("status",t.status),localStorage.setItem("bind_wx",t.bind_wx),localStorage.setItem("avatar",t.avatar)}update(t){return new Promise((e,a)=>{try{this._save(t),e(this)}catch(s){localStorage?(localStorage.clear(),this._save(t),e(value)):a(new Error("localStorage不可用"))}})}getInfo(){return this.check(),this.profile}destroy(){return d({domain:h}).post("/account/logout").finally(()=>{localStorage.removeItem("created_at"),localStorage.setItem("logged_in","false"),localStorage.removeItem("token")})}toLogin(t){t=t?encodeURIComponent(t):encodeURIComponent(location.href),location.href=p.account.login+"?redirect="+t}getToken(){return this.getInfo().token}getUUID(){return localStorage.getItem("device_id")}isEmailMember(){return this.getInfo().group>=8}isPhoneMember(){return this.getInfo().group>=16}isEditor(){return this.getInfo().group>=64}isAdmin(){return this.getInfo().group>=128}isDeveloper(){return this.getInfo().group>=256}isSuperAdmin(){return this.getInfo().group>=512}isSuperAuthor(){return this.isLogin()?d().get("/api/cms/user/is_super_author/"+this.getInfo().uid).then(t=>t.data.data):new Promise((t,e)=>{t(!1)})}hasBindwx(){return this.getInfo().bind_wx}_isVIP(t){let e=t.was_vip;if(e){let e=new Date(t.expire_date)-new Date>0;return e}return!1}_isPRO(t){let e=t.was_pro;if(e){let e=new Date(t.pro_expire_date)-new Date>0;return e}return!1}isVIP(){return this.asset?new Promise((t,e)=>{t(this._isPRO(this.asset)||this._isVIP(this.asset))}):this.getAsset().then(t=>this._isPRO(t)||this._isVIP(t))}isPRO(){return this.asset?new Promise((t,e)=>{t(this._isPRO(this.asset))}):this.getAsset().then(t=>this._isPRO(t))}getAsset(){return this.isLogin()?m().get("/api/vip/i").then(t=>{let e=t.data.data;return this.asset=e,e}):new Promise((t,e)=>{let a={was_vip:0,expire_date:"1970-02-02T16:00:00.000Z",total_day:0,was_pro:0,pro_expire_date:"1970-02-02T16:00:00.000Z",pro_total_day:0,rename_card_count:0,had_renamed:0,namespace_card_count:0,box_coin:0,points:0};this.asset=a,t(a)})}getLevel(t){for(let e in v){let a=v[e];if(t>=a[0]&&t<a[1])return~~e}}}e["a"]=new b},d0c8:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return n})),a.d(e,"e",(function(){return r}));var s=a("41cb");function i(t,e){return Object(s["b"])().get("/api/team/video/event/".concat(t),{params:e})}function o(t){return Object(s["b"])().delete("/api/team/video/".concat(t))}function r(t,e){return Object(s["b"])().put("/api/team/video/".concat(t),e)}function n(t){return Object(s["b"])().post("/api/team/video",t)}function l(t,e){return Object(s["b"])().get("/api/team/rank/events/".concat(t,"/live-tv-list"),{params:e})}},d814:function(t,e,a){"use strict";a("3e2b")}}]);
//# sourceMappingURL=chunk-5ddb9c7f.b9d16660.js.map