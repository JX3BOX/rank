(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1610d19b"],{"365d":function(t,e,a){"use strict";var i=a("65c2"),n={LOGO:i["__imgPath"]+"image/rank/common/logo.png",cover:function(t){return i["__imgPath"]+"image/rank/cover/".concat(t,".png")},boss:function(t){return i["__imgPath"]+"image/rank/race/".concat(t,"/boss.png")},version:function(t){return i["__imgPath"]+"image/rank/race/".concat(t,"/version.png")},logos:function(t){return i["__imgPath"]+"image/rank/logos/"+t+".png"},bossIcon:function(t){return i["__imgPath"]+"image/rank/boss/".concat(t,".png")}};e["a"]=n},3841:function(t,e,a){"use strict";a("7310")},"38ec":function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-rank-video",attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.3)"}},[e("rank-boss",{attrs:{data:t.bossList,aid:t.current_boss},on:{update:t.changeBoss}}),e("div",{staticClass:"m-rank-video-content"},[t.data&&t.data.length?[e("el-row",{staticClass:"m-rank-video-list",attrs:{gutter:20}},t._l(t.data,(function(a,i){return e("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.current_boss||a.aid==t.current_boss,expression:"!current_boss || item.aid == current_boss"}],key:i,attrs:{span:8}},[e("div",{staticClass:"m-rank-video-item"},[e("a",{staticClass:"u-video",attrs:{href:a.url,target:"_blank"}},[e("img",{staticClass:"u-live-cover",attrs:{src:t.videoCover(a.aid),loading:"lazy"}}),e("i",{staticClass:"u-player"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"78.809",height:"91",viewBox:"0 0 78.809 91",fill:"none","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{"fill-rule":"evenodd",fill:"#FFF",opacity:".75",d:"M39.404 91l39.404-22.75v-45.5L39.404 0 0 22.75v45.5L39.404 91zm-10.75-26.88l32.25-18.62-32.25-18.62v37.24z"}}),e("path",{attrs:{"fill-rule":"evenodd",fill:"rgba(255, 255, 255, 1)",d:"M78.808 68.25L39.404 91 0 68.25v-45.5L39.404 0l39.404 22.75v45.5zm-2-1.155L39.404 88.691 2 67.095v-43.19L39.404 2.309l37.404 21.596v43.19zM26.654 23.416v44.168l3-1.733L64.904 45.5l-38.25-22.084zm32.25 23.239l-28.25 16.31-2 1.154V26.88l2 1.155 28.25 16.31 2 1.155-2 1.155z"}})])])]),e("div",{staticClass:"u-info"},[e("a",{attrs:{href:t.teamLink(a.team_id),target:"_blank"}},[e("img",{staticClass:"u-team-logo",attrs:{src:t.liveAvatar(a.logo),loading:"lazy"}})]),e("div",{staticClass:"u-team"},[e("span",{staticClass:"u-label"},[t._v("团队 : ")]),e("a",{staticClass:"u-team-name",attrs:{href:t.teamLink(a.team_id),target:"_blank"}},[t._v(t._s(a.name))])]),e("div",{staticClass:"u-room"},[e("a",{staticClass:"u-room-name",attrs:{href:a.url,target:"_blank"}},[t._v(" "+t._s(a.title)+" ")])])])])])})),1),e("el-pagination",{staticClass:"m-rank-video-pages m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next,jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})]:e("el-alert",{staticClass:"m-archive-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}})],2),e("el-dialog",{staticClass:"m-rank-video-dialog",attrs:{title:"添加/编辑视频",visible:t.dialogVisible,width:"30%","append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"m-rank-video-form"},[e("el-form",{ref:"form",attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"团队ID"}},[e("el-input",{attrs:{placeholder:"请输入正确的团队数字编号"},model:{value:t.video.team_id,callback:function(e){t.$set(t.video,"team_id",t._n(e))},expression:"video.team_id"}})],1),e("el-form-item",{attrs:{label:"成就ID"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.video.aid,callback:function(e){t.$set(t.video,"aid",t._n(e))},expression:"video.aid"}},t._l(t.bossList,(function(t,a){return e("el-option",{key:a,attrs:{label:t,value:a}})})),1)],1),e("el-form-item",{attrs:{label:"视频链接"}},[e("el-input",{attrs:{placeholder:"请输入视频网址"},model:{value:t.video.url,callback:function(e){t.$set(t.video,"url",e)},expression:"video.url"}})],1),e("el-form-item",{attrs:{label:"视频标题"}},[e("el-input",{attrs:{placeholder:"请注明XX视角"},model:{value:t.video.title,callback:function(e){t.$set(t.video,"title",e)},expression:"video.title"}})],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)])],1)},n=[],s=(a("d3b7"),a("159b"),a("65c2")),o=a("d0c8"),r=a("85e4"),l=a("c9d2"),c=a("9756"),d=a("8618"),u=a("2ef0"),v={components:{"rank-boss":d["a"]},data:function(){return{video_title_img:s["__imgPath"]+"image/rank/common/videos.png",data:[],per:24,page:1,total:1,loading:!1,servers:c,server:"",current_boss:"",isAdmin:l["a"].isAdmin(),isEditor:l["a"].isEditor(),dialogVisible:!1,video:{ID:"",team_id:"",event_id:"",aid:"",title:"",url:""}}},computed:{id:function(){return this.$store.state.id},params:function(){return{pageSize:this.per,pageIndex:this.page,aid:this.current_boss}},achieves:function(){return this.$store.state.achieves||[]},bossList:function(){var t={};return this.achieves.forEach((function(e){t[e.achievement_id]=e.name})),t},demo_video:function(){return{team_id:"",event_id:~~this.id,aid:"",title:"",url:""}}},methods:{changeBoss:function(t){this.current_boss="all"==t?"":t,this.page=1,this.loadData()},loadData:function(){var t=this;this.loading=!0,Object(o["d"])(this.id,this.params).then((function(e){t.data=e.data.data.list,t.page=e.data.data.page.index,t.total=e.data.data.page.total})).finally((function(){t.loading=!1}))},del:function(t){var e=this;this.$alert("确认删除吗","消息",{confirmButtonText:"确定",callback:function(a){"confirm"==a&&Object(o["b"])(t).then((function(t){e.$message({type:"success",message:"删除成功"}),location.reload()}))}})},edit:function(t){this.dialogVisible=!0,this.video=t},add:function(){this.dialogVisible=!0,this.video=Object(u["cloneDeep"])(this.demo_video)},submit:function(){var t=this;this.video.ID?Object(o["e"])(this.video.ID,this.video).then((function(e){t.$message({type:"success",message:"更新成功"}),t.dialogVisible=!1})):Object(o["a"])(this.video).then((function(e){t.$message({type:"success",message:"发布成功"}),t.dialogVisible=!1}))},liveAvatar:function(t){return t?Object(r["h"])(t,136,!0):s["default_avatar"]},teamLink:function(t){return Object(r["e"])("org",t)},videoCover:function(t){return s["__imgPath"]+"image/rank/videos/".concat(t,".png")}},watch:{params:{deep:!0,handler:function(){this.loadData()}}},created:function(){this.loadData()}},m=v,g=(a("3841"),a("2877")),p=Object(g["a"])(m,i,n,!1,null,null,null);e["default"]=p.exports},"546a":function(t,e,a){"use strict";a("c519")},7310:function(t,e,a){},8618:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"m-rank-boss",attrs:{gutter:20,type:"flex"}},[e("el-col",{attrs:{span:t.span}},[e("div",{class:["u-boss u-boss-is_all",{active:"all"==t.aid||""==t.aid}],on:{click:function(e){return t.changeBoss("all")}}},[e("span",{staticClass:"u-boss-name"},[t._v("全部")])])]),t._l(t.data,(function(a,i){return e("el-col",{key:"aid-"+i,attrs:{span:t.span}},[e("li",{class:["u-boss",{active:i==t.aid}],on:{click:function(e){return t.changeBoss(i)}}},[e("el-image",{staticClass:"u-boss-icon",attrs:{src:t.bossIcon(i)}},[e("img",{attrs:{slot:"error",src:t.bossIcon(0)},slot:"error"})]),e("span",{staticClass:"u-boss-name"},[t._v(t._s(a))])],1)])}))],2)},n=[],s=(a("b64b"),a("365d")),o={props:{aid:{type:String,default:"all"},data:{type:Object,default:function(){return{}}}},emits:["update"],computed:{span:function(){return~~(24/Object.keys(this.data).length+1)}},methods:{bossIcon:function(t){return s["a"].bossIcon(t)},changeBoss:function(t){this.$emit("update",t)}}},r=o,l=(a("546a"),a("2877")),c=Object(l["a"])(r,i,n,!1,null,null,null);e["a"]=c.exports},9756:function(t){t.exports=JSON.parse('["缘起稻香","天宝盛世","剑啸江湖","蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","青梅煮酒","共結來緣","傲血戰意","巔峰再起","江海雲夢"]')},c519:function(t,e,a){},d0c8:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"e",(function(){return o}));var i=a("41cb");function n(t,e){return Object(i["d"])().get("/api/team/video/event/".concat(t),{params:e})}function s(t){return Object(i["d"])().delete("/api/team/video/".concat(t))}function o(t,e){return Object(i["d"])().put("/api/team/video/".concat(t),e)}function r(t){return Object(i["d"])().post("/api/team/video",t)}function l(t,e){return Object(i["d"])().get("/api/team/rank/events/".concat(t,"/live-tv-list"),{params:e})}}}]);
//# sourceMappingURL=chunk-1610d19b.5abe6051.js.map