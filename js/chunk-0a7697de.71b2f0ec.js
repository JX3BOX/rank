(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a7697de"],{"5ab5":function(t,e,i){},6595:function(t,e,i){"use strict";i("e338")},"99b3":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-rank-info"},[t.times?e("TimeLine",{attrs:{html:t.times}}):t._e(),t._m(0),e("div",{staticClass:"m-rank-txt",domProps:{innerHTML:t._s(t.desc)}})],1)},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-rank-btns"},[e("a",{staticClass:"u-btn u-btn-join",attrs:{href:"/rank/#/join",target:"_blank",rel:"noopener"}}),e("a",{staticClass:"u-btn u-btn-weal",attrs:{href:"/rank/#/surprise",target:"_blank",rel:"noopener"}})])}],s=(i("99af"),i("a15b"),i("d81d"),i("a573"),i("65c2")),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-time-line-box"},[e("h2",[t._v("活动时间线")]),e("div",{staticClass:"m-time-line-box"},[e("img",{staticClass:"u-arr u-arr-left",class:{"u-arr__hide":!t.currentIndex},attrs:{src:t.arrow},on:{click:function(e){return t.scroll("left")}}}),e("div",{staticClass:"m-timeline"},[e("ul",{ref:"timeline",style:{left:t.listLeft+"px"},domProps:{innerHTML:t._s(t.html)}})]),e("img",{staticClass:"u-arr u-arr-right",class:{"u-arr__hide":t.currentIndex==t.totalDay},attrs:{src:t.arrow},on:{click:function(e){return t.scroll("right")}}})])])},l=[],o=(i("d3b7"),i("0643"),i("4e3e"),i("159b"),{name:"TimeLine",props:{html:{type:String,default:""}},data:function(){return{listLeft:0,currentIndex:0,totalDay:0,arrow:"".concat(s["__imgPath"],"image/rank/common/timeline_arrow.svg")}},watch:{html:{immediate:!0,handler:function(t){var e=this;t&&this.$nextTick((function(){var t=e.$refs.timeline,i=t.querySelectorAll("li"),n=new Date,r=n.getMonth()+1,s=n.getDate(),a=-1,l=!1,o=0;if(i.forEach((function(t,e){var i=t.querySelector(".u-time");if(i){var n=i.textContent.split("-"),c=parseInt(n[0],10),f=parseInt(n[1],10);o++,c===r&&f===s?(l=!0,a=e):(c<r||c===r&&f<=s)&&(a=e)}})),-1!==a){var c=i[a];c.classList.add("nearest");var f=document.createElement("div");f.classList.add("progress"),f.textContent="当前进度",c.appendChild(f)}if(l)for(var u=a+1;u<i.length;u++)i[u].classList.add("after-today");e.totalDay=o-1,e.setLiPosition(!0)}))}}},methods:{setLiPosition:function(t){for(var e=this.$refs.timeline,i=e.querySelectorAll("li"),n=0,r=0;r<i.length;r++){var s=i[r];s.style.left=n+"px",n+=s.offsetWidth+34,t?"nearest"==s.classList[0]&&this.initTreatment(s):r===this.currentIndex&&(this.listLeft=-s.offsetLeft)}},initTreatment:function(t){var e=this,i=this.$refs.timeline.offsetWidth,n=t.offsetLeft,r=i/2-n-t.offsetWidth/2;this.listLeft=r,this.$nextTick((function(){for(var t=e.$refs.timeline,i=t.querySelectorAll("li"),n=0;n<i.length;n++)-e.listLeft>=i[n].offsetLeft&&-e.listLeft<=i[n+1].offsetLeft&&(e.currentIndex=n+1)}))},scroll:function(t){var e=this.$refs.timeline,i=e.querySelector("li");i&&("left"===t?this.currentIndex=Math.max(0,this.currentIndex-1):"right"===t&&(this.currentIndex=Math.min(this.currentIndex+1,e.children.length-1)),this.setLiPosition())}}}),c=o,f=(i("a614"),i("2877")),u=Object(f["a"])(c,a,l,!1,null,null,null),h=u.exports,m={components:{TimeLine:h},data:function(){return{timelineArrow:s["__imgPath"]+"image/rank/common/timeline_arrow.svg"}},computed:{id:function(){return this.$store.state.id},desc:function(){return this.$store.state.race.desc},times:function(){var t,e=(null===(t=this.$store.state.race)||void 0===t?void 0:t.timeline)||[];return e.map((function(t){return'\n                        <li>\n                            <span class="u-time">'.concat(t.time,'</span>\n                            <span class="u-label">').concat(t.text,"</span>\n                        </li>\n                    ")})).join("")}},methods:{timeShaftChange:function(t){"next"==t?this.$refs.timeShaftSwiperRef.swiper.slideNext():"prev"==t&&this.$refs.timeShaftSwiperRef.swiper.slidePrev()}}},d=m,p=(i("6595"),Object(f["a"])(d,n,r,!1,null,null,null));e["default"]=p.exports},a614:function(t,e,i){"use strict";i("5ab5")},e338:function(t,e,i){}}]);
//# sourceMappingURL=chunk-0a7697de.71b2f0ec.js.map